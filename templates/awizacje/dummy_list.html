{% extends "base.html" %}
{% load awizacje_extras %}

{% block title %}Lista awizacji{% endblock %}

{% block content %}
  <h1>Lista awizacji</h1>

  {% if preadvices %}
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Data</th>
          <th>Firma</th>
          <th>Login</th>
          <th>Typ dostawy</th>
          <th>HU (typ=ilość)</th>
        </tr>
      </thead>
      <tbody>
        {% for p in preadvices %}
          <tr>
            <td>{{ p.id }}</td>
            <td>{{ p.delivery_date }}</td>
            <td>{{ p.company.name|default:"-" }}</td>
            <td>{{ p.login }}</td>
            <td>{{ p.delivery_type.Delivery_type|default:"-" }}</td>
            <td>
              {% with items=hu_map|get_item:p.id %}
                {% if items %}
                  {% for pair in items %}
                    {{ pair.0 }}={{ pair.1 }}{% if not forloop.last %}, {% endif %}
                  {% endfor %}
                {% else %}
                  -
                {% endif %}
              {% endwith %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Brak awizacji.</p>
  {% endif %}
{% endblock %}
